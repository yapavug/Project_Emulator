Требования к эмулятору процессора:
• Эмулятор должен содержать следующие эмулируемые компоненты, отображаемые на экране: регистры общего назначения (в том числе аккумулятор и счетчик), счетчик команд, регистр команд, регистр флагов или отдельные флаги, которые необходимы. В случае использования безадресных команд вместо регистров общего назначения ввести регистровый стек и указатель стека. В регистровом стеке в эмуляторе отображать для пользователя числа, которые принадлежать стеку. В регистре команд отображать не только текущую исполняемую команду в машинном коде, но и её ассемблерное представление. Также отобразить отдельные поля команды. В эмуляторе должен содержаться блок или блоки ОЗУ. ОЗУ можно не отображать на форме эмулятора. Количество ячеек ОЗУ лучше ограничить несколькими тысячами единиц, чтобы не возникла идея о сложной организации памяти. ОЗУ заполняется программой и обрабатываемыми массивами: данными. Первым элементом массива идет его номер.
• Эмуляция работы процессора происходит как запись изменений значений в компонентах, указанных выше после выполнения каждой команды.
• Процессор должен соответствовать определенной системе команд. Данная система команд должна соответствовать либо существующим процессорам или быть придуманной. Требования к системе команд следующие:
✓ Команды выполняют операции над скалярами (не векторами и не массивами)
✓ Команды должны соответствовать RISC-архитектуре. Т.е. иметь фиксированную длину и в памяти может находиться только один из операндов команды. Многие простые команды x-86 процессоров соответствуют данной архитектуре.
✓ Размер команд лучше ограничить 16 битами в случае безадресных и одноадресных команд и 32 битами в случае двух и трехадресных команд. Размер ячеек памяти ОЗУ проще выбрать под размер
команды, чтобы команда занимала одну ячейку, а не распределялась по нескольким.
✓ Система команд должна содержать команды для выполнения поставленной задачи. Для этого необходимы следующие типы команд: команды пересылки данных, арифметико-логические команды, в том числе и операции длинной арифметики, команды условных переходов. В эмуляторе допускается прописывание только необходимых команд Необходимо использовать следующие типы адресации: непосредственная, прямая, регистровая и косвенно-регистровая. В случае использования безадресных команд использовать команды, оперирующие со стеком или с регистром счетчиком. Для операций с ОЗУ в случае стековой машины использовать только команды скопировать из памяти в стек или из стека в память, адрес при этом указывать на вершине стека. Остальные типы адресации проще не использовать.
• Программы, которые заложены в эмуляторе, должны выполнять действия над массивами в цикле. Размер массива лучше ограничить 7-15 элементами. Допускается заполнение массива и программы на этапе инициализации.
• В эмуляторе должна быть заложена возможность записи программы в ОЗУ пользователем. Пользователь должен набирать команды на ассемблере, перевод команды с ассемблера в машинные инструкции должен осуществлять эмулятор. Ассемблер используется либо существующий, либо придуманный. Для двух и трехадресных команд рекомендуется обозначать тип адресации через определенные элементы, такие как квадратные скобки и символьное название регистров, а не использовать для каждой комбинации типов адресаций операндов разные названия команд.
• Смысл выводимой для пользователя информации должна быть понятен. Т.е. не должно выводится неназванных значений.
